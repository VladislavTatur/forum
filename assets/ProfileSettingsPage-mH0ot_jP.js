import{u as v,a as g,s as x,r as f,j as s,B as u,b as c,R as w,Z as S,_ as U,T as h}from"./index-nk8iqIlp.js";import{u as T,C as n}from"./index.esm-BC_IfugR.js";import{T as l}from"./TextField-DIxAH645.js";import{C as E}from"./Card-xoGOCvLH.js";const B=[{name:"name",label:"Name"},{name:"username",label:"User Name"},{name:"phone",label:"Phone"},{name:"email",label:"Email"},{name:"address.street",label:"Street"},{name:"address.suite",label:"Suite"},{name:"address.city",label:"City"},{name:"address.zipcode",label:"Zipcode"},{name:"website",label:"Website"},{name:"company.name",label:"Company"},{name:"company.catchPhrase",label:"Catch Phrase"},{name:"company.bs",label:"bs"}],N=()=>{const d=v(),i=g(),r=x(),{control:o,handleSubmit:b,reset:m,watch:P}=T({defaultValues:r??{}}),a=P("newPassword"),j=({newPassword:e,confirmPassword:t,...C})=>{const p={...C,password:e&&t?e:r.password};S(p),d(U(p)),i(w.profile)},y=()=>{i(w.profile)};return f.useEffect(()=>{r&&m(r)},[r,m]),s.jsxs(u,{component:"form",display:"grid",gap:2,onSubmit:b(j),children:[B.map(e=>s.jsx(n,{name:e.name,control:o,render:({field:t})=>s.jsx(l,{label:e.label,...t})},e.name)),s.jsx(n,{name:"newPassword",control:o,rules:{validate:{notOldPassword:()=>a!==r?.password||"Please do not use your old password"}},render:({field:e})=>s.jsx(l,{...e,type:"password",label:"New Password",autoComplete:"new-password",error:!!(a&&e.value&&a===r?.password),helperText:a&&e.value&&a===r?.password?"Please do not use your old password":""})}),s.jsx(n,{name:"confirmPassword",control:o,rules:{validate:{passwordsMatch:e=>e===a||"Passwords do not match",notOldPassword:()=>a!==r?.password||"Please do not use your old password"}},render:({field:e})=>s.jsx(l,{...e,type:"password",label:"Confirm New Password",autoComplete:"new-password",error:!!(a&&e.value&&a!==e.value),helperText:a&&e.value&&a!==e.value?"Passwords do not match":""})}),s.jsxs(u,{display:"flex",gap:2,mt:2,children:[s.jsx(c,{type:"submit",variant:"contained",sx:{minWidth:100},children:"Save"}),s.jsx(c,{variant:"outlined",sx:{minWidth:"100px"},onClick:y,children:"Cancel"})]})]})},Z=()=>x()?s.jsxs(E,{children:[s.jsx(h,{variant:"h5",p:2,children:"Profile Editing"}),s.jsx(N,{})]}):s.jsx(h,{children:"Loading user..."});export{Z as default};
